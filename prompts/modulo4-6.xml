<task>
  <submodule>4.6: Dashboard Principal (index.html)</submodule>
  <objective>
    Transformar a página inicial (index.html) em um dashboard funcional, REUTILIZANDO componentes e padrões já estabelecidos nos sub-módulos anteriores.
    - Manter a estrutura base do index.html existente (menu, breadcrumbs, layout)
    - Adicionar componentes de dashboard: cards de estatísticas, tabela de estoque, últimas movimentações
    - Integrar com endpoints do Módulo 4 já implementados
    - Preservar a experiência do usuário e padrões visuais existentes
  </objective>

  <files>
    <!-- DASHBOARD PRINCIPAL - MESMA ESTRUTURA BASE DO INDEX.HTML EXISTENTE -->
    <file type="frontend">
      <path>public/index.html</path>
      <purpose>Página principal transformada em dashboard - manter estrutura base existente</purpose>
      <requirements>
        - MANTER estrutura HTML existente do index.html (menu superior, breadcrumbs, containers)
        - ADICIONAR seções do dashboard após o breadcrumbs:
          * Cards de estatísticas (4 cards em grid) - reutilizar estilo de cards existentes
          * Tabela de estoque atual - mesma estrutura e estilo da tabela de usuários/locais
          * Seção de últimas movimentações - estilo similar à tabela mas mais compacto
        - Cards de estatísticas devem exibir:
          * Total de Produtos (com ícone) - chamar /api/dashboard/stats
          * Total de Locais (com ícone) - chamar /api/dashboard/stats  
          * Alertas Ativos (com badge vermelho) - chamar /api/alertas/contagem
          * Movimentações Hoje (com ícone) - chamar /api/dashboard/stats
        - Tabela de estoque deve exibir: Produto, Local, Estoque Atual, Consumo Médio
        - Últimas movimentações: Data, Tipo, Produto, Quantidade, Local
        - MANTER scripts existentes: auth.js, navbar.js, app.js
        - ADICIONAR novo script: dashboard.js
      </requirements>
    </file>

    <!-- LÓGICA JAVASCRIPT DO DASHBOARD - PADRÃO SIMILAR A USERS.JS -->
    <file type="frontend">
      <path>public/js/dashboard.js</path>
      <purpose>Lógica do dashboard - padrão similar aos scripts existentes com foco em múltiplas chamadas API</purpose>
      <requirements>
        - REUTILIZAR padrão de users.js: DOMContentLoaded, funções assíncronas, tratamento de erros
        - IMPLEMENTAR carregamento inicial de dados ao abrir a página
        - FUNÇÕES PRINCIPAIS:
          * carregarEstatisticas(): buscar /api/dashboard/stats e atualizar cards
          * carregarEstoqueAtual(): buscar /api/dashboard/estoque-atual (ou calcular) para tabela
          * carregarUltimasMovimentacoes(): buscar /api/dashboard/ultimas-movimentacoes
          * carregarContagemAlertas(): buscar /api/alertas/contagem para badge
        - MESMO tratamento de erros com notify.js dos scripts existentes
        - ATUALIZAÇÃO automática a cada 2 minutos (setInterval) - opcional
        - MESMA verificação de permissão (se aplicável)
        - PREVENIR múltiplas chamadas simultâneas
      </requirements>
    </file>

    <!-- ESTILOS ESPECÍFICOS DO DASHBOARD - EXTENDENDO STYLES.CSS -->
    <file type="frontend">
      <path>public/css/dashboard.css</path>
      <purpose>Estilos específicos para dashboard - reutilizando sistema de design existente</purpose>
      <requirements>
        - REUTILIZAR cores, tipografia e espaçamento do sistema
        - Cards de estatística: usar mesma paleta de users.css (cores suaves, bordas arredondadas)
        - Grid responsivo: 4 cards em desktop, 2 em tablet, 1 em mobile (flexbox/grid)
        - Tabela: MESMO estilo da tabela de usuários (cores header, zebrado, hover)
        - Badges: reutilizar badges de status existentes (verde, vermelho, etc.)
        - Ícones: usar mesmo conjunto de ícones do sistema (Font Awesome ou similar)
        - Estados de loading: reutilizar spinners e skeletons existentes
      </requirements>
    </file>
  </files>

  <reuse_emphasis>
    <existing_components>
      - Estrutura HTML base do index.html (NÃO recriar)
      - Sistema de navegação e breadcrumbs (manter intacto)
      - Estilos de tabela de users.html/locais.html (REUTILIZAR)
      - Padrão de cards e modais do sistema (ADAPTAR)
      - Sistema de notificações notify.js (USAR)
      - Auth.js para autenticação (INTEGRAR)
    </existing_components>
    <new_elements>
      - Layout de grid para cards de estatísticas (NOVO)
      - Tabela de estoque atual com consumo médio (NOVO)
      - Seção de últimas movimentações (NOVO)
      - Lógica de atualização periódica de dados (NOVO)
      - Integração com múltiplos endpoints simultâneos (NOVO)
    </new_elements>
  </reuse_emphasis>

  <api_integration>
    <endpoints>
      - GET /api/dashboard/stats - para cards de estatística
      - GET /api/dashboard/ultimas-movimentacoes - para seção de movimentações
      - GET /api/alertas/contagem - para badge de alertas
      - GET /api/dashboard/estoque-atual - para tabela de estoque (ou calcular localmente)
    </endpoints>
    <data_flow>
      - Carregar todos os dados na inicialização
      - Atualizar interface conforme dados chegam
      - Tratar cenários de dados vazios/erros
      - Mostrar estados de loading durante requisições
    </data_flow>
  </api_integration>

  <visual_specification>
    <cards_layout>
      - 4 cards em grid: largura igual, altura fixa
      - Ícone à esquerda, número grande no centro, label abaixo
      - Cores: azul (produtos), verde (locais), laranja (movimentações), vermelho (alertas)
      - Badge vermelho sobre ícone de alertas para contagem
    </cards_layout>
    <table_specs>
      - Tabela de estoque: colunas [Produto, Local, Estoque Atual, Consumo Médio]
      - Estoque baixo: destaque em laranja/vermelho (reutilizar lógica de users.js)
      - Últimas movimentações: colunas [Data, Tipo, Produto, Quantidade, Local]
      - Limitar a 10-15 registros com link "Ver mais"
    </table_specs>
  </visual_specification>

  <implementation_strategy>
    <step1>Manter estrutura base do index.html existente - NÃO recriar do zero</step1>
    <step2>Adicionar seções do dashboard usando classes CSS existentes</step2>
    <step3>Implementar dashboard.js seguindo padrão de users.js (load, error handling)</step3>
    <step4>Estilizar componentes reutilizando regras CSS existentes</step4>
    <step5>Integrar com endpoints e testar fluxo completo</step5>
  </implementation_strategy>

  <dependencies>
    - Sub-módulos 4.1-4.4 implementados (endpoints do dashboard)
    - Sub-módulo 4.2 implementado (sistema de alertas)
    - Estrutura base do index.html do Módulo 0
    - Componentes de UI dos Módulos 2 e 3
  </dependencies>

  <testing_focus>
    - Carregamento inicial: todos os dados aparecem
    - Cards: números corretos e atualizados
    - Tabelas: dados formatados corretamente
    - Erros: tratamento adequado (ex: API offline)
    - Responsividade: layout adapta em diferentes telas
    - Performance: múltiplas chamadas API não travam interface
  </testing_focus>
</task>