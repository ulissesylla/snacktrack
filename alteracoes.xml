<?xml version="1.0" encoding="UTF-8"?>
<alteracoes>
  <modulo>4.2</modulo>
  <descricao>Alterações complementares para implementação do sistema de alertas</descricao>
  <detalhes>
    <alteracao>
      <tipo>Integração</tipo>
      <descricao>Integração com estoqueService para cálculo de estoque atual em vez de apenas movimentacaoData</descricao>
      <justificativa>Utilizar o estoqueService.getEstoqueAtual() para cálculos mais precisos e consistentes com a lógica central de estoque</justificativa>
    </alteracao>
    <alteracao>
      <tipo>Estrutura de dados</tipo>
      <descricao>Adaptar estrutura da tabela de alertas para incluir local_id quando necessário</descricao>
      <justificativa>Os alertas de estoque mínimo precisam referenciar o local específico onde o estoque está baixo</justificativa>
    </alteracao>
    <alteracao>
      <tipo>Validação</tipo>
      <descricao>Implementar lógica de validação para evitar alertas duplicados baseados no tipo e produto</descricao>
      <justificativa>Prevenir geração excessiva de alertas para o mesmo problema</justificativa>
    </alteracao>
  </detalhes>
</alteracoes>